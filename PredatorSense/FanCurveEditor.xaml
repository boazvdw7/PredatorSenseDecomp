<Window x:Class="PredatorSense.FanCurveEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Fan Curve Editor" Height="400" Width="700"
        Background="#222">
    <Window.Resources>
        <Style x:Key="DarkDataGridColumnHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderBrush" Value="#444"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
        </Style>
    </Window.Resources>
    <Grid Background="#222">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>

        <!-- DataGrid for editing points -->
        <DataGrid x:Name="FanCurveGrid"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  Margin="10"
                  Grid.Column="0"
                  ItemsSource="{Binding FanCurve}"
                  Background="#222"
                  Foreground="#FFF"
                  RowBackground="#2A2A2A"
                  AlternatingRowBackground="#242424"
                  ColumnHeaderStyle="{StaticResource DarkDataGridColumnHeaderStyle}"
                  GridLinesVisibility="None"
                  BorderBrush="#444"
                  BorderThickness="1">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Temperature (°C)"
                                    Binding="{Binding Temperature, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    Width="*"/>
                <DataGridTextColumn Header="Fan Speed (%)"
                                    Binding="{Binding FanSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Chart area -->
        <Grid Grid.Column="1" Margin="10" Background="#222">
            <!-- Axes -->
            <Canvas x:Name="ChartCanvas" Background="#222" />
            <!-- Labels -->
            <TextBlock Text="Fan Speed (%)"
                       VerticalAlignment="Top"
                       HorizontalAlignment="Left"
                       Margin="5,0,0,0"
                       FontWeight="Bold"
                       Foreground="#FFF"/>
            <TextBlock Text="Temperature (°C)"
                       VerticalAlignment="Bottom"
                       HorizontalAlignment="Right"
                       Margin="0,0,5,5"
                       FontWeight="Bold"
                       Foreground="#FFF"/>
        </Grid>

        <Button Content="Apply"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="10"
                Width="100"
                Click="Apply_Click"
                Grid.ColumnSpan="2"
                Background="#333"
                Foreground="#FFF"
                BorderBrush="#555"/>
    </Grid>
</Window>